{"createdAt":"2025-02-17T22:39:48.783Z","updatedAt":"2025-02-17T22:41:38.000Z","id":"Rhq11PzuESznemAu","name":"Voiceflow demo supporto chatbot","active":false,"nodes":[{"parameters":{"content":"![voiceflow](https://uploads.n8n.io/templates/voiceflow.png)\n## Find Customer\nThis portion of the workflow queries the customer database and returns customer details to the AI agent if found. If not found, it returns NOT_FOUND for the customer details. ","height":620,"width":1440,"color":7},"id":"c2756f7d-ebfb-4eb8-8350-97517e829403","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","position":[-320,60],"typeVersion":1},{"parameters":{"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"id":"bddfa253-24c6-430e-9a13-f07daf8c1513","operator":{"type":"string","operation":"notEmpty","singleValue":true},"leftValue":"={{ $json.Name }}","rightValue":""}]},"options":{}},"id":"8b5656cf-abd5-409f-abae-effa7d29b9e3","name":"Check if user found","type":"n8n-nodes-base.if","position":[480,420],"typeVersion":2.2},{"parameters":{"content":"![zendesk](https://uploads.n8n.io/templates/zendesk.png)\n## Create Zendesk Ticket \nCreates a Zendesk ticket on behalf of the customer when needed.","height":540,"width":1460,"color":7},"id":"700c61c2-e4ee-436b-aeb4-5c7c8e1e49db","name":"Sticky Note1","type":"n8n-nodes-base.stickyNote","position":[-320,720],"typeVersion":1},{"parameters":{"content":"![Gcal](https://uploads.n8n.io/templates/calendar.png)\n## Schedule a meeting\nThis gives availability for google calendar and schedules a meeting as well ","height":700,"width":1920,"color":7},"id":"b0db7549-c3c0-4145-9c45-140f757c87ae","name":"Sticky Note2","type":"n8n-nodes-base.stickyNote","position":[-320,1280],"typeVersion":1},{"parameters":{"content":"![voiceflow](https://uploads.n8n.io/templates/airtable.png)\n## Give Product team transcripts for analysis\nNeed to help your product team out","height":540,"width":900,"color":7},"id":"ac3302b1-28a2-4c66-9196-992729d4c6b4","name":"Sticky Note3","type":"n8n-nodes-base.stickyNote","position":[-320,2020],"typeVersion":1},{"parameters":{"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"id":"d1c61a1f-0265-4eb5-918f-3111e916387f","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.available }}","rightValue":""}]},"options":{}},"id":"617d71d9-777a-4d66-9b01-535754fe7f70","name":"Check if available","type":"n8n-nodes-base.if","position":[620,1600],"typeVersion":2.2},{"parameters":{"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"id":"f055e64e-a1d2-4213-9d5c-1d1069cb582c","operator":{"type":"dateTime","operation":"after"},"leftValue":"={{ $json.availability }}","rightValue":"={{ $now }}"}]},"options":{}},"id":"9d38328f-f3d6-4d53-bfd6-3d0cc69b6809","name":"Check for malformed date","type":"n8n-nodes-base.if","position":[200,1680],"typeVersion":2.2},{"parameters":{"method":"POST","url":"https://n8n8688.zendesk.com/api/v2/tickets","authentication":"predefinedCredentialType","nodeCredentialType":"zendeskApi","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Accept","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"ticket\": {\n    \"requester_id\": \"{{ $json.user.id }}\",\n    \"subject\": \"New TechFin Customer Ticket for {{ $json.user.name }}\",\n    \"comment\": {\n      \"body\": \"{{ $('Extract Zendesk Fields').item.json.body.summary }}\\n\\n{{ $('Extract Zendesk Fields').item.json.body.transcript.replace(/\\n/g, \"\\\\n\").replace(/\\\\'/g, \"\\\\'\").replace(/\\\\\"/g, '\\\\\"').replace(/\\\\&/g, \"\\\\&\").replace(/\\\\r/g, \"\\\\r\").replace(/\\\\t/g, \"\\\\t\").replace(/\\\\b/g, \"\\\\b\").replace(/\\\\f/g, \"\\\\f\") }}\"\n    }\n  }\n}","options":{"redirect":{"redirect":{}}}},"id":"0dce1241-e5ec-48cd-b474-b06eac76501f","name":"Create Ticket","type":"n8n-nodes-base.httpRequest","position":[440,980],"typeVersion":4.2,"onError":"continueRegularOutput"},{"parameters":{"method":"POST","url":"https://n8n8688.zendesk.com/api/v2/users/create_or_update","authentication":"predefinedCredentialType","nodeCredentialType":"zendeskApi","sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"user\": {\n    \"email\": \"{{ $json.body.email }}\",\n    \"identities\": [\n      {\n        \"type\": \"email\",\n        \"value\": \"{{ $json.body.email }}\"\n      }\n    ],\n    \"name\": \"{{ $json.body.name }}\"\n  }\n}","options":{}},"id":"8b3e32cb-82c7-459d-84e1-88d625efa994","name":"Create Customer in DB","type":"n8n-nodes-base.httpRequest","position":[220,980],"typeVersion":4.2,"onError":"continueRegularOutput"},{"parameters":{"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"id":"1ff20679-9964-4ac9-933e-c370c2ef72c1","operator":{"type":"string","operation":"notEmpty","singleValue":true},"leftValue":"={{ $json.ticket.url }}","rightValue":""}]},"options":{}},"id":"637dad95-4a75-46b7-88dc-4a3ba1df0fed","name":"Check if submitted succesfully","type":"n8n-nodes-base.if","position":[640,980],"typeVersion":2.2},{"parameters":{"respondWith":"json","responseBody":"{\n  \"status\": \"SUCCESS_TICKET_SUBMITTED\"\n}","options":{}},"id":"d8738f40-4625-4123-b681-edc6d09aa90a","name":"Ticket Created Successfully","type":"n8n-nodes-base.respondToWebhook","position":[900,880],"typeVersion":1.1},{"parameters":{"respondWith":"json","responseBody":"{\n  \"status\": \"TICKET_ERROR\"\n}","options":{"responseCode":400}},"id":"d327fbf5-e92e-48a0-9ea7-46d7f0e4d0b1","name":"Error Creating Ticket","type":"n8n-nodes-base.respondToWebhook","position":[900,1060],"typeVersion":1.1},{"parameters":{"httpMethod":"POST","path":"9a52822c-0304-4dad-a86a-ae662161243c","options":{}},"id":"a1ed0466-635d-4eb3-a5e8-98eba5702f7d","name":"Airtable Endpoint","type":"n8n-nodes-base.webhook","position":[-200,2360],"webhookId":"9a52822c-0304-4dad-a86a-ae662161243c","typeVersion":2},{"parameters":{"httpMethod":"POST","path":"c1020b94-603c-4981-ab48-51e208d17223","responseMode":"responseNode","options":{}},"id":"b2061f55-3830-4b78-8f7f-38a5b297fda9","name":"Gcal Endpoint","type":"n8n-nodes-base.webhook","position":[-240,1600],"webhookId":"c1020b94-603c-4981-ab48-51e208d17223","typeVersion":2},{"parameters":{"httpMethod":"POST","path":"9c15c8ac-8f3a-40d3-8ad5-e40468388968","responseMode":"responseNode","options":{}},"id":"c709713a-b852-4cab-8e5a-f542eee309fe","name":"Zendesk Endpoint","type":"n8n-nodes-base.webhook","position":[-220,980],"webhookId":"9c15c8ac-8f3a-40d3-8ad5-e40468388968","typeVersion":2},{"parameters":{"httpMethod":"POST","path":"d9b20efe-9bb4-4d8b-b9aa-d568f43f78ea","responseMode":"responseNode","options":{}},"id":"7afef684-0bae-4459-ad5f-3af9c4f4bdeb","name":"Voiceflow Endpoint","type":"n8n-nodes-base.webhook","position":[-220,420],"webhookId":"d9b20efe-9bb4-4d8b-b9aa-d568f43f78ea","typeVersion":2},{"parameters":{"assignments":{"assignments":[{"id":"90de9dcb-1ab6-43d6-999e-6672fbd81f2a","name":"query.phone_number","type":"string","value":"={{ $json.query.phone_number.replace(/^\\+/, '') }}"}]},"options":{}},"id":"88a9118d-231c-4b6f-a85d-a56ba244e852","name":"Extract Phone Number","type":"n8n-nodes-base.set","position":[0,420],"typeVersion":3.4},{"parameters":{"assignments":{"assignments":[{"id":"3490074c-304b-4424-b724-74afba26f71e","name":"body.email","type":"string","value":"={{ $json.body.email }}"},{"id":"0b5d31dc-029b-4055-91f3-55d820b43cdb","name":"body.name","type":"string","value":"={{ $json.body.name }}"},{"id":"79ba72a8-42ff-481e-9ca8-6d9237ba84d8","name":"body.transcript","type":"string","value":"={{ $json.body.transcript }}"},{"id":"77aeef5e-fb51-46d9-a66f-03bc7fe29ac7","name":"body.summary","type":"string","value":"={{ $json.body.summary }}"}]},"options":{}},"id":"9e7d0311-bece-4b6d-b439-85e771a9b1db","name":"Extract Zendesk Fields","type":"n8n-nodes-base.set","position":[0,980],"typeVersion":3.4},{"parameters":{"assignments":{"assignments":[{"id":"b0e95ac3-08a7-48ad-917a-9736f6e07cd2","name":"availability","type":"string","value":"={{ $json.query.datetime.toDateTime() }}"},{"id":"ddc4b463-2acc-45bd-9d09-fee782ab1879","name":"query.name","type":"string","value":"={{ $json.query.name }}"},{"id":"3f4cbd33-fa49-4a0e-bd48-919ab7224684","name":"query.email","type":"string","value":"={{ $json.query.email }}"},{"id":"1027589d-b475-4330-9686-9b7a9e7ece8f","name":"query.summary","type":"string","value":"={{ $json.query.summary }}"}]},"options":{}},"id":"3ecd30be-543b-4730-ab94-5d72aff0db44","name":"Extract Gcal Data","type":"n8n-nodes-base.set","position":[-20,1600],"typeVersion":3.4,"alwaysOutputData":true,"onError":"continueRegularOutput"},{"parameters":{"assignments":{"assignments":[{"id":"6f121f9b-6692-41fa-849b-f613d9fe9009","name":"phone","type":"string","value":"={{ $json.query.phone }}"},{"id":"acec6f45-271d-4f6a-bf29-e8ea1f5d9fa7","name":"summary","type":"string","value":"={{ $json.query.summary }}"},{"id":"e76573ec-3884-4fe8-b34f-19b77022ba31","name":"transcript","type":"string","value":"={{ $json.query.transcript }}"},{"id":"a3951676-739a-4641-99b1-ed7f5fcbf08d","name":"type","type":"string","value":"={{ $json.query.type }}"}]},"options":{}},"id":"f6d82139-cae4-4fb3-a873-10df17a0127c","name":"Extract Airtable Data","type":"n8n-nodes-base.set","position":[20,2360],"typeVersion":3.4},{"parameters":{"operation":"create","base":{"__rl":true,"mode":"list","value":"app9dFu44S5VTIFRV","cachedResultUrl":"https://airtable.com/app9dFu44S5VTIFRV","cachedResultName":"Product Customer Analysis"},"table":{"__rl":true,"mode":"list","value":"tblXGczD6wjZ6ZNko","cachedResultUrl":"https://airtable.com/app9dFu44S5VTIFRV/tblXGczD6wjZ6ZNko","cachedResultName":"Table 1"},"columns":{"value":{"Phone":"={{ $json.phone }}","Summary":"={{ $json.summary }}","Transcript":"={{ $json.transcript }}","Customer Type":"={{ $json.type }}"},"schema":[{"id":"Phone","type":"string","display":true,"removed":false,"readOnly":false,"required":false,"displayName":"Phone","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Summary","type":"string","display":true,"removed":false,"readOnly":false,"required":false,"displayName":"Summary","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Transcript","type":"string","display":true,"removed":false,"readOnly":false,"required":false,"displayName":"Transcript","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Customer Type","type":"string","display":true,"removed":false,"readOnly":false,"required":false,"displayName":"Customer Type","defaultMatch":false,"canBeUsedToMatch":true}],"mappingMode":"defineBelow","matchingColumns":[],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"id":"579503da-7d9b-42a7-af9a-14df73f43215","name":"Create Airtable Data","type":"n8n-nodes-base.airtable","position":[280,2360],"typeVersion":2.1},{"parameters":{"documentId":{"__rl":true,"mode":"list","value":"17sPEb3d55tiqJwt1Dms6MG1-qAAF0k9fQzbTs1lI1Yw","cachedResultUrl":"https://docs.google.com/spreadsheets/d/17sPEb3d55tiqJwt1Dms6MG1-qAAF0k9fQzbTs1lI1Yw/edit?usp=drivesdk","cachedResultName":"Customer Database"},"sheetName":{"__rl":true,"mode":"list","value":"gid=0","cachedResultUrl":"https://docs.google.com/spreadsheets/d/17sPEb3d55tiqJwt1Dms6MG1-qAAF0k9fQzbTs1lI1Yw/edit#gid=0","cachedResultName":"Sheet1"},"filtersUI":{"values":[{"lookupColumn":"Phone Number","lookupValue":"={{ $json.query.phone_number }}"}]},"options":{}},"id":"c2676728-b48a-4014-8b16-e1d0bcda5198","name":"Query Google Sheets for Phone","type":"n8n-nodes-base.googleSheets","position":[260,420],"typeVersion":4.5,"alwaysOutputData":true},{"parameters":{"options":{}},"id":"92972b5a-37b4-4400-b07c-88cf74a0624a","name":"Respond to Webhook with Customer Data","type":"n8n-nodes-base.respondToWebhook","position":[740,280],"typeVersion":1.1},{"parameters":{"options":{}},"id":"b4425f64-d64d-409e-ab0b-d5eb24129377","name":"Respond to Webhook with Error","type":"n8n-nodes-base.respondToWebhook","position":[880,520],"typeVersion":1.1},{"parameters":{"assignments":{"assignments":[{"id":"1ec3d6bd-41d8-489b-8c52-73c88267e0bd","name":"row_number","type":"string","value":"NOT_FOUND"},{"id":"bfd6215e-f4ed-4d75-b9ae-d5925f87eb98","name":"Name","type":"string","value":"NOT_FOUND"},{"id":"e06fc869-57e7-4dc5-b563-4d093be654ab","name":"Email Address","type":"string","value":"NOT_FOUND"},{"id":"ae1a429b-1c21-4dcb-bf68-e0c01732ec5e","name":"Tier","type":"string","value":"NOT_FOUND"},{"id":"879369f3-79f7-4420-bcec-b72f67212297","name":"Phone Number","type":"string","value":"NOT_FOUND"}]},"options":{}},"id":"01fe1486-ff81-436a-bc81-a4cb76456f77","name":"Set Error Data","type":"n8n-nodes-base.set","position":[720,520],"typeVersion":3.4},{"parameters":{"resource":"calendar","calendar":{"__rl":true,"mode":"list","value":"angel@n8n.io","cachedResultName":"angel@n8n.io"},"timeMin":"={{ $json.availability }}","timeMax":"={{ $json.availability.toDateTime().plus(30, 'minutes') }}","options":{}},"id":"dabbecfb-4c9f-45e0-9167-067ea18e5fc6","name":"Check Calendar Availability","type":"n8n-nodes-base.googleCalendar","position":[400,1600],"typeVersion":1.3},{"parameters":{"calendar":{"__rl":true,"mode":"list","value":"angel@n8n.io","cachedResultName":"angel@n8n.io"},"start":"={{ $('Extract Gcal Data').item.json.availability }}","end":"={{ $('Extract Gcal Data').item.json.availability.toDateTime().plus(30, 'minutes') }}","additionalFields":{"attendees":["={{ $('Extract Gcal Data').item.json.query.email }}"],"description":"={{ $('Extract Gcal Data').item.json.query.summary }}","summary":"=TechFin Enterprise Customer Success Meeting with {{ $('Extract Gcal Data').item.json.query.name }}"}},"id":"9b6293c8-83ab-41ff-92ed-c08c3c54f2d6","name":"Create Calendar Event","type":"n8n-nodes-base.googleCalendar","position":[900,1480],"typeVersion":1.3},{"parameters":{"assignments":{"assignments":[{"id":"759c2ab4-bc39-4f7c-b585-212d6d6e9ab5","name":"status","type":"string","value":"MEETING_BOOKED_SUCCESSFULLY"}]},"options":{}},"id":"e09b718a-7a1e-4b20-8f76-6143cc239cb6","name":"Set Calendar Success Message","type":"n8n-nodes-base.set","position":[1120,1480],"typeVersion":3.4},{"parameters":{"options":{}},"id":"554e602d-a97a-40bd-a4ee-b1849cb3e578","name":"Respond with Success","type":"n8n-nodes-base.respondToWebhook","position":[1340,1480],"typeVersion":1.1},{"parameters":{"assignments":{"assignments":[{"id":"759c2ab4-bc39-4f7c-b585-212d6d6e9ab5","name":"status","type":"string","value":"CSM_UNAVAILABLE"}]},"options":{}},"id":"cb4be44d-3aa4-427c-ab94-4cde9b57a5f9","name":"Set Calendar Error Data","type":"n8n-nodes-base.set","position":[900,1720],"typeVersion":3.4},{"parameters":{"options":{}},"id":"39b2a935-07f6-497b-86fc-f22435b38d1b","name":"Respond With Calendar Error data","type":"n8n-nodes-base.respondToWebhook","position":[1140,1720],"typeVersion":1.1},{"parameters":{"assignments":{"assignments":[{"id":"759c2ab4-bc39-4f7c-b585-212d6d6e9ab5","name":"status","type":"string","value":"INVALID_DATA_ERROR"}]},"options":{}},"id":"cf7c27c8-1642-4824-98b6-6d4a3c788462","name":"Set Invalid Data Error","type":"n8n-nodes-base.set","position":[420,1820],"typeVersion":3.4},{"parameters":{"options":{}},"id":"20806dec-55d1-4b14-9121-2da5687e5f6c","name":"Respond with Generic Error","type":"n8n-nodes-base.respondToWebhook","position":[600,1820],"typeVersion":1.1},{"parameters":{"content":"## I'm a note \n[Youtube video](https://youtu.be/ET2VgV8ICDI)","height":140,"width":320,"color":5},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-720,720],"id":"27b1cc8b-a296-4695-a42c-1d4394732727","name":"Sticky Note4"}],"connections":{"Create Ticket":{"main":[[{"node":"Check if submitted succesfully","type":"main","index":0}]]},"Gcal Endpoint":{"main":[[{"node":"Extract Gcal Data","type":"main","index":0}]]},"Set Error Data":{"main":[[{"node":"Respond to Webhook with Error","type":"main","index":0}]]},"Zendesk Endpoint":{"main":[[{"node":"Extract Zendesk Fields","type":"main","index":0}]]},"Airtable Endpoint":{"main":[[{"node":"Extract Airtable Data","type":"main","index":0}]]},"Extract Gcal Data":{"main":[[{"node":"Check for malformed date","type":"main","index":0}]]},"Check if available":{"main":[[{"node":"Create Calendar Event","type":"main","index":0}],[{"node":"Set Calendar Error Data","type":"main","index":0}]]},"Voiceflow Endpoint":{"main":[[{"node":"Extract Phone Number","type":"main","index":0}]]},"Check if user found":{"main":[[{"node":"Respond to Webhook with Customer Data","type":"main","index":0}],[{"node":"Set Error Data","type":"main","index":0}]]},"Extract Phone Number":{"main":[[{"node":"Query Google Sheets for Phone","type":"main","index":0}]]},"Create Calendar Event":{"main":[[{"node":"Set Calendar Success Message","type":"main","index":0}]]},"Create Customer in DB":{"main":[[{"node":"Create Ticket","type":"main","index":0}]]},"Extract Airtable Data":{"main":[[{"node":"Create Airtable Data","type":"main","index":0}]]},"Extract Zendesk Fields":{"main":[[{"node":"Create Customer in DB","type":"main","index":0}]]},"Set Invalid Data Error":{"main":[[{"node":"Respond with Generic Error","type":"main","index":0}]]},"Set Calendar Error Data":{"main":[[{"node":"Respond With Calendar Error data","type":"main","index":0}]]},"Check for malformed date":{"main":[[{"node":"Check Calendar Availability","type":"main","index":0}],[{"node":"Set Invalid Data Error","type":"main","index":0}]]},"Check Calendar Availability":{"main":[[{"node":"Check if available","type":"main","index":0}]]},"Set Calendar Success Message":{"main":[[{"node":"Respond with Success","type":"main","index":0}]]},"Query Google Sheets for Phone":{"main":[[{"node":"Check if user found","type":"main","index":0}]]},"Check if submitted succesfully":{"main":[[{"node":"Ticket Created Successfully","type":"main","index":0}],[{"node":"Error Creating Ticket","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"948d02fa-84de-4194-bd1c-7dee419aacfd","triggerCount":0,"tags":[{"createdAt":"2025-02-12T01:25:44.824Z","updatedAt":"2025-02-12T01:25:44.824Z","id":"bzJZk40lpXglcXDs","name":"CHAT"},{"createdAt":"2025-02-11T23:59:41.483Z","updatedAt":"2025-02-14T16:18:26.979Z","id":"dzhL8PxGOvRSKz2J","name":"ANCORA IN TEST"},{"createdAt":"2025-02-10T13:32:48.613Z","updatedAt":"2025-02-23T19:53:15.863Z","id":"k5fZTQAhTgrJYO8g","name":"AD USO DEMO"}]}