{"createdAt":"2025-02-14T16:19:07.136Z","updatedAt":"2025-02-14T16:19:09.000Z","id":"Jqkt87QYTBG7yaa8","name":"Email routing x ecommerce","active":false,"nodes":[{"parameters":{"formTitle":"Contacts","formDescription":"Basic Contact Form","formFields":{"values":[{"fieldLabel":"Name","placeholder":"Name","requiredField":true},{"fieldLabel":"Email","placeholder":"Email","requiredField":true},{"fieldLabel":"Message","fieldType":"textarea","placeholder":"Message","requiredField":true}]},"responseMode":"lastNode","options":{}},"id":"086f948a-7a04-4da9-b9ec-1745d8b799d9","name":"On form submission","type":"n8n-nodes-base.formTrigger","position":[-1220,340],"webhookId":"8e10c8ca-895c-4274-ba95-0d646b8bda4e","typeVersion":2.2},{"parameters":{"inputText":"={{ $json.Message }}","categories":{"categories":[{"category":"Request Quote","description":"Request for quote"},{"category":"Product info","description":"General information about a product"},{"category":"General problem","description":"General problems about a product"},{"category":"Order","description":"Information about an order placed"}]},"options":{"fallback":"other","systemPromptTemplate":"=Please classify the text provided by the user into one of the following categories: {categories}, and use the provided formatting instructions below. Don't explain, and only output the json with the selected {categories}."}},"id":"1c63d144-cbb0-4546-b244-a078e0c2663b","name":"Text Classifier","type":"@n8n/n8n-nodes-langchain.textClassifier","position":[-900,340],"typeVersion":1},{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4o-mini","cachedResultName":"gpt-4o-mini"},"options":{}},"id":"ae0341c1-8a4f-406b-917f-5cdf2788aa6f","name":"OpenAI","type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","position":[-960,560],"typeVersion":1.2},{"parameters":{"fromEmail":"from@domain.com","toEmail":"to@domain.com","subject":"=[n8n Contacts] Product info","html":"=Name: {{ $json.Name }}\nEmail: {{ $json.Email }}\n\nMessage:\n{{ $json.Message }}\n\nTipo prodotto: {{ $json[\"tipo prodotto\"] }}","options":{"replyTo":"={{ $json.Email }}"}},"id":"60d97eb1-21e1-4a62-9576-41e506cd9b79","name":"Prod. Dep.","type":"n8n-nodes-base.emailSend","position":[-420,120],"typeVersion":2.1,"webhookId":"387a7140-340f-46a1-b6e5-d01446a364cc"},{"parameters":{"fromEmail":"from@domain.com","toEmail":"to@domain.com","subject":"=[n8n Contacts] Quote","html":"=Name: {{ $json.Name }}\nEmail: {{ $json.Email }}\n\nMessage:\n{{ $json.Message }}\n\nTipo prodotto: {{ $json[\"tipo prodotto\"] }}","options":{"replyTo":"={{ $json.Email }}"}},"id":"40864328-2610-402e-b5af-9b9213805882","name":"Quote Dep.","type":"n8n-nodes-base.emailSend","position":[-420,-120],"typeVersion":2.1,"webhookId":"34ee2b79-e70b-4cd2-b992-cde5e15172bb"},{"parameters":{"fromEmail":"from@domain.com","toEmail":"to@domain.com","subject":"=[n8n Contacts] General","html":"=Name: {{ $json.Name }}\nEmail: {{ $json.Email }}\n\nMessage:\n{{ $json.Message }}\n\nTipo prodotto: {{ $json[\"tipo prodotto\"] }}","options":{"replyTo":"={{ $json.Email }}"}},"id":"8be027d5-80bd-4161-b6b0-1efc53118c0f","name":"Gen. Dep.","type":"n8n-nodes-base.emailSend","position":[-420,340],"typeVersion":2.1,"webhookId":"107e4071-d91e-40de-b9c4-b37ff8173717"},{"parameters":{"fromEmail":"from@domain.com","toEmail":"to@domain.com","subject":"=[n8n Contacts] Order info","html":"=Name: {{ $json.Name }}\nEmail: {{ $json.Email }}\n\nMessage:\n{{ $json.Message }}\n\nTipo prodotto: {{ $json[\"tipo prodotto\"] }}","options":{"replyTo":"={{ $json.Email }}"}},"id":"dd90e544-d681-4812-84ad-0930fb0f1935","name":"Order Dep.","type":"n8n-nodes-base.emailSend","position":[-420,580],"typeVersion":2.1,"webhookId":"77c2922e-d107-4ec5-84d7-79e377569eab"},{"parameters":{"fromEmail":"from@domain.com","toEmail":"to@domain.com","subject":"=[n8n Contacts] Other","html":"=Name: {{ $json.Name }}\nEmail: {{ $json.Email }}\n\nMessage:\n{{ $json.Message }}\n\nTipo prodotto: {{ $json[\"tipo prodotto\"] }}","options":{"replyTo":"={{ $json.Email }}"}},"id":"305d20bf-3083-4cd5-8469-5fd949eebc3e","name":"Other Dep.","type":"n8n-nodes-base.emailSend","position":[-420,800],"typeVersion":2.1,"webhookId":"678650a7-a1d4-4d7c-a18e-dd45175fd3fe"},{"parameters":{"operation":"append","documentId":{"__rl":true,"mode":"list","value":"1D6tfsAK81ZE6VA0-sd_syuyI_rloNYjgWOhwgszPIZw","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1D6tfsAK81ZE6VA0-sd_syuyI_rloNYjgWOhwgszPIZw/edit?usp=drivesdk","cachedResultName":"Classified Contact Form"},"sheetName":{"__rl":true,"mode":"list","value":"gid=0","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1D6tfsAK81ZE6VA0-sd_syuyI_rloNYjgWOhwgszPIZw/edit#gid=0","cachedResultName":"Foglio1"},"columns":{"value":{"TO":"={{ (JSON.stringify($json.envelope.to)) }}","DATA":"={{ $('Text Classifier').item.json.submittedAt }}","NOME":"={{ $('Text Classifier').item.json.Name }}","EMAIL":"={{ $('Text Classifier').item.json.Email }}","CATEGORIA":"info prodotti","RICHIESTA":"={{ $('Text Classifier').item.json.Message }}"},"schema":[{"id":"DATA","type":"string","display":true,"required":false,"displayName":"DATA","defaultMatch":false,"canBeUsedToMatch":true},{"id":"NOME","type":"string","display":true,"required":false,"displayName":"NOME","defaultMatch":false,"canBeUsedToMatch":true},{"id":"EMAIL","type":"string","display":true,"required":false,"displayName":"EMAIL","defaultMatch":false,"canBeUsedToMatch":true},{"id":"RICHIESTA","type":"string","display":true,"required":false,"displayName":"RICHIESTA","defaultMatch":false,"canBeUsedToMatch":true},{"id":"CATEGORIA","type":"string","display":true,"required":false,"displayName":"CATEGORIA","defaultMatch":false,"canBeUsedToMatch":true},{"id":"TO","type":"string","display":true,"removed":false,"required":false,"displayName":"TO","defaultMatch":false,"canBeUsedToMatch":true}],"mappingMode":"defineBelow","matchingColumns":[],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"id":"3df113d1-7a55-48fa-aef3-37d99c333183","name":"Quote DB","type":"n8n-nodes-base.googleSheets","position":[-220,-120],"typeVersion":4.5},{"parameters":{"operation":"append","documentId":{"__rl":true,"mode":"list","value":"1D6tfsAK81ZE6VA0-sd_syuyI_rloNYjgWOhwgszPIZw","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1D6tfsAK81ZE6VA0-sd_syuyI_rloNYjgWOhwgszPIZw/edit?usp=drivesdk","cachedResultName":"Classified Contact Form"},"sheetName":{"__rl":true,"mode":"list","value":"gid=0","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1D6tfsAK81ZE6VA0-sd_syuyI_rloNYjgWOhwgszPIZw/edit#gid=0","cachedResultName":"Foglio1"},"columns":{"value":{"TO":"={{ (JSON.stringify($json.envelope.to)) }}","DATA":"={{ $('Text Classifier').item.json.submittedAt }}","NOME":"={{ $('Text Classifier').item.json.Name }}","EMAIL":"={{ $('Text Classifier').item.json.Email }}","CATEGORIA":"info prodotti","RICHIESTA":"={{ $('Text Classifier').item.json.Message }}"},"schema":[{"id":"DATA","type":"string","display":true,"required":false,"displayName":"DATA","defaultMatch":false,"canBeUsedToMatch":true},{"id":"NOME","type":"string","display":true,"required":false,"displayName":"NOME","defaultMatch":false,"canBeUsedToMatch":true},{"id":"EMAIL","type":"string","display":true,"required":false,"displayName":"EMAIL","defaultMatch":false,"canBeUsedToMatch":true},{"id":"RICHIESTA","type":"string","display":true,"required":false,"displayName":"RICHIESTA","defaultMatch":false,"canBeUsedToMatch":true},{"id":"CATEGORIA","type":"string","display":true,"required":false,"displayName":"CATEGORIA","defaultMatch":false,"canBeUsedToMatch":true},{"id":"TO","type":"string","display":true,"removed":false,"required":false,"displayName":"TO","defaultMatch":false,"canBeUsedToMatch":true}],"mappingMode":"defineBelow","matchingColumns":[],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"id":"cfa513b1-93a8-4601-8f6e-f5886bc924a1","name":"Prod DB","type":"n8n-nodes-base.googleSheets","position":[-220,120],"typeVersion":4.5},{"parameters":{"operation":"append","documentId":{"__rl":true,"mode":"list","value":"1D6tfsAK81ZE6VA0-sd_syuyI_rloNYjgWOhwgszPIZw","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1D6tfsAK81ZE6VA0-sd_syuyI_rloNYjgWOhwgszPIZw/edit?usp=drivesdk","cachedResultName":"Classified Contact Form"},"sheetName":{"__rl":true,"mode":"list","value":"gid=0","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1D6tfsAK81ZE6VA0-sd_syuyI_rloNYjgWOhwgszPIZw/edit#gid=0","cachedResultName":"Foglio1"},"columns":{"value":{"TO":"={{ (JSON.stringify($json.envelope.to)) }}","DATA":"={{ $('Text Classifier').item.json.submittedAt }}","NOME":"={{ $('Text Classifier').item.json.Name }}","EMAIL":"={{ $('Text Classifier').item.json.Email }}","CATEGORIA":"info prodotti","RICHIESTA":"={{ $('Text Classifier').item.json.Message }}"},"schema":[{"id":"DATA","type":"string","display":true,"required":false,"displayName":"DATA","defaultMatch":false,"canBeUsedToMatch":true},{"id":"NOME","type":"string","display":true,"required":false,"displayName":"NOME","defaultMatch":false,"canBeUsedToMatch":true},{"id":"EMAIL","type":"string","display":true,"required":false,"displayName":"EMAIL","defaultMatch":false,"canBeUsedToMatch":true},{"id":"RICHIESTA","type":"string","display":true,"required":false,"displayName":"RICHIESTA","defaultMatch":false,"canBeUsedToMatch":true},{"id":"CATEGORIA","type":"string","display":true,"required":false,"displayName":"CATEGORIA","defaultMatch":false,"canBeUsedToMatch":true},{"id":"TO","type":"string","display":true,"removed":false,"required":false,"displayName":"TO","defaultMatch":false,"canBeUsedToMatch":true}],"mappingMode":"defineBelow","matchingColumns":[],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"id":"8798ed14-553c-47c7-8831-e8958a880031","name":"General DB","type":"n8n-nodes-base.googleSheets","position":[-220,340],"typeVersion":4.5},{"parameters":{"operation":"append","documentId":{"__rl":true,"mode":"list","value":"1D6tfsAK81ZE6VA0-sd_syuyI_rloNYjgWOhwgszPIZw","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1D6tfsAK81ZE6VA0-sd_syuyI_rloNYjgWOhwgszPIZw/edit?usp=drivesdk","cachedResultName":"Classified Contact Form"},"sheetName":{"__rl":true,"mode":"list","value":"gid=0","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1D6tfsAK81ZE6VA0-sd_syuyI_rloNYjgWOhwgszPIZw/edit#gid=0","cachedResultName":"Foglio1"},"columns":{"value":{"TO":"={{ (JSON.stringify($json.envelope.to)) }}","DATA":"={{ $('Text Classifier').item.json.submittedAt }}","NOME":"={{ $('Text Classifier').item.json.Name }}","EMAIL":"={{ $('Text Classifier').item.json.Email }}","CATEGORIA":"info prodotti","RICHIESTA":"={{ $('Text Classifier').item.json.Message }}"},"schema":[{"id":"DATA","type":"string","display":true,"required":false,"displayName":"DATA","defaultMatch":false,"canBeUsedToMatch":true},{"id":"NOME","type":"string","display":true,"required":false,"displayName":"NOME","defaultMatch":false,"canBeUsedToMatch":true},{"id":"EMAIL","type":"string","display":true,"required":false,"displayName":"EMAIL","defaultMatch":false,"canBeUsedToMatch":true},{"id":"RICHIESTA","type":"string","display":true,"required":false,"displayName":"RICHIESTA","defaultMatch":false,"canBeUsedToMatch":true},{"id":"CATEGORIA","type":"string","display":true,"required":false,"displayName":"CATEGORIA","defaultMatch":false,"canBeUsedToMatch":true},{"id":"TO","type":"string","display":true,"removed":false,"required":false,"displayName":"TO","defaultMatch":false,"canBeUsedToMatch":true}],"mappingMode":"defineBelow","matchingColumns":[],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"id":"12efda28-08b7-4776-a198-040a5b112418","name":"Order DB","type":"n8n-nodes-base.googleSheets","position":[-220,580],"typeVersion":4.5},{"parameters":{"operation":"append","documentId":{"__rl":true,"mode":"list","value":"1D6tfsAK81ZE6VA0-sd_syuyI_rloNYjgWOhwgszPIZw","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1D6tfsAK81ZE6VA0-sd_syuyI_rloNYjgWOhwgszPIZw/edit?usp=drivesdk","cachedResultName":"Classified Contact Form"},"sheetName":{"__rl":true,"mode":"list","value":"gid=0","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1D6tfsAK81ZE6VA0-sd_syuyI_rloNYjgWOhwgszPIZw/edit#gid=0","cachedResultName":"Foglio1"},"columns":{"value":{"TO":"={{ (JSON.stringify($json.envelope.to)) }}","DATA":"={{ $('Text Classifier').item.json.submittedAt }}","NOME":"={{ $('Text Classifier').item.json.Name }}","EMAIL":"={{ $('Text Classifier').item.json.Email }}","CATEGORIA":"info prodotti","RICHIESTA":"={{ $('Text Classifier').item.json.Message }}"},"schema":[{"id":"DATA","type":"string","display":true,"required":false,"displayName":"DATA","defaultMatch":false,"canBeUsedToMatch":true},{"id":"NOME","type":"string","display":true,"required":false,"displayName":"NOME","defaultMatch":false,"canBeUsedToMatch":true},{"id":"EMAIL","type":"string","display":true,"required":false,"displayName":"EMAIL","defaultMatch":false,"canBeUsedToMatch":true},{"id":"RICHIESTA","type":"string","display":true,"required":false,"displayName":"RICHIESTA","defaultMatch":false,"canBeUsedToMatch":true},{"id":"CATEGORIA","type":"string","display":true,"required":false,"displayName":"CATEGORIA","defaultMatch":false,"canBeUsedToMatch":true},{"id":"TO","type":"string","display":true,"removed":false,"required":false,"displayName":"TO","defaultMatch":false,"canBeUsedToMatch":true}],"mappingMode":"defineBelow","matchingColumns":[],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"id":"09b679b6-0aaf-4bf1-bbc5-608de53d4b99","name":"Other DB","type":"n8n-nodes-base.googleSheets","position":[-220,800],"typeVersion":4.5},{"parameters":{"content":"## Important notes\n\nThis very simple workflow is ideal for eCommerce businesses or customer support teams looking to automate and streamline the handling of contact form submissions.\n\n- It is possible to hook any external form such as CF7 for Wordpress through a webhook\n- It is possible to send the email through other providers by replacing them with the relative nodes (Gmail, Outlook....)\n- It is possible to change the collection database with other tools","height":280,"width":580},"id":"1e6add9d-8cdb-4dee-8dd4-a02365cccab4","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","position":[-1220,-20],"typeVersion":1}],"connections":{"OpenAI":{"ai_languageModel":[[{"node":"Text Classifier","type":"ai_languageModel","index":0}]]},"Gen. Dep.":{"main":[[{"node":"General DB","type":"main","index":0}]]},"Order Dep.":{"main":[[{"node":"Order DB","type":"main","index":0}]]},"Other Dep.":{"main":[[{"node":"Other DB","type":"main","index":0}]]},"Prod. Dep.":{"main":[[{"node":"Prod DB","type":"main","index":0}]]},"Quote Dep.":{"main":[[{"node":"Quote DB","type":"main","index":0}]]},"Text Classifier":{"main":[[{"node":"Quote Dep.","type":"main","index":0},{"node":"Prod. Dep.","type":"main","index":0}],[],[{"node":"Gen. Dep.","type":"main","index":0}],[{"node":"Order Dep.","type":"main","index":0}],[{"node":"Other Dep.","type":"main","index":0}]]},"On form submission":{"main":[[{"node":"Text Classifier","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"79f3e8b6-3ead-46cd-97af-9067e9a7eea8","triggerCount":0,"tags":[{"createdAt":"2025-02-11T23:59:41.483Z","updatedAt":"2025-02-14T16:18:26.979Z","id":"dzhL8PxGOvRSKz2J","name":"ANCORA IN TEST"}]}